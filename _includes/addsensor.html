<div class="section-wrapper add-sensor">
    <div class="container">
        <div class="row ">
            <div class="col-sm-8">
                <div class="heading">Instructions and templates</div>
                <div class="description">The IoT community benefits from access to lots of sensors and code. Share yours. Just write it up and turn it in for review. Once we make sure it works well with UPM and is open source and is free, we’ll post it to the library.

                </div>    
                <div class="separator"></div>
                <div class="heading">Rules and guidelines</div>
                <div class="description">Your driver should be written in C/C++ with SWIG interfaces, have proper documentation and include at least one example.
                    <div class="detail-link">    
                        <table class="documentation-table">
                            <tr>
                                <td style="width: 40%"><a class="link" href="{{ site.baseurl }}/Documentation/contributingrules.html"> Contribution rules</a></td>
                                <td style="width: 60%"><a target="_blank" class="link" href="https://github.com/intel-iot-devkit/upm/blob/master/docs/creating_java_bindings.md"> Creating Java* bindings</a></td>
                            </tr>
                            <tr>   
                                <td style="width:40%"><a class="link" href="{{ site.baseurl }}/Documentation/moduleNaming.html"> Module naming</a></td>
                                <td style="width: 60%"><a target="_blank" class="link" href="https://github.com/intel-iot-devkit/upm/blob/master/docs/documentation.md"> Writing sensor documentation</a></td>
                            </tr>
                            <tr>
                                <td style="width: 40%"></td>
                                <td style="width: 60%"><a target="_blank" class="link" href="https://github.com/intel-iot-devkit/upm/blob/master/docs/guidelines.md"> Code commenting and documentation guidelines</a></td>
                            </tr>
                        </table>            
                    </div>   
                </div> 
            </div>

        </div>
    </div>
</div>
<div class="section-wrapper add-sensor background-theme">
    <div class="container">
        <div class="row ">
            <div class="col-sm-8 col-xs-12">
                <div class="heading">Step-by-step: Creating or porting a module</div>
                <div class="description">Porting Arduino libraries to MRAA as UPM libraries is usually easy. The key to successful sharing is to understand how a non-real time OS deals with interrupts and timers. It also depends on the sensor’s design. For a detailed example, see Making a UPM module for MAX31855.
                </div>
                <div class="title">Adding a new module to UPM</div>
                <div class="description">
                    1. Review contribution rules (see <a class="link" href="{{ site.baseurl }}/Documentation/contributingrules.html">Contribution rules</a> and <a target="_blank" class="link" href="https://github.com/intel-iot-devkit/upm/blob/master/docs/documentation.md"> Writing sensor documentation</a>)<br/>
                    2. Choose a name for your module (see <a class="link" href="{{ site.baseurl }}/Documentation/moduleNaming.html">Module naming </a>)<br/>
                    3. Make a new folder in src/modulename<br/>
                    4. Create a CMakeLists.txt file inside src/modulename<br/>

                </div>
                <div class="title">CmakeLists.txt</div>
                <div class="description">
                    <div>By default, you'll need a header called modulename.hpp and a C++ file called modulename.cxx. You can have multiple headers and source files. Only public headers need to be added to module_hpp. All source files need to be in module_src.
                    </div>
                    <br/>
                        set (libname "modulename")<br/>
                        set (libdescription "Module Description")<br/>
                        set (module_src ${libname}.cxx)<br/>
                        set (module_hpp ${libname}.hpp)<br/>
                        upm_module_init()<br/>
                </div>
                <div class="title">Making your API</div>
                <div class="description">If you’re starting from scratch, use the <a href="{{ site.baseurl }}/Documentation/contributingrules.html" class="link"> new sensor template</a>. Most UPM APIs have a simple set of functions. A simple object->read() function is usually preferred. Depending on your sensor/actuator, however, this may or may not be easy or not even make sense. In that case, you should look at a sensor on UPM that’s similar to yours and see how its APIs were created.
                </div><br/>
                <div class="description">Create a class for your sensor with a constructor that defines the pins it is on. This constructor will create the mraa_*_context structs that are required to talk to the board's IO. An I2c sensor will create a mraa_i2c_context. Keep it as a private member and require a bus number and slave address in its constructor.
                </div>
                <div class="title">Mapping Arduino API to libmraa</div>
                <div class="description">Your constructor is similar to the setup() function in Arduino, you should initialize your IO the way you want it. This means initializing contexts (private members) and setting the correct modes for them.
                </div><br/>
                <div class="description">See the MRAA API documentation for the exact API.</div>
                <div class="title">Building your module</div>
                <div class="description">To build your module just follow Building UPM. By creating a folder and the CMakelists.txt file you have done all that is required to add your sensor to the UPM build system.</div>

                <div class="title">Sending your module to us for inclusion in UPM</div>
                <div class="description">The last step is when you're happy with your module and it works send us a pull request! We'd love to include your sensor in our repository.</div>
                <div class="description document-padding">Feel free to use github, or email us at mihai.tudor.panu@intel.com with a git formatted patch of your sensor.<a target="_blank" href="https://help.github.com/articles/creating-a-pull-request/" class="link"> Learn more about creating a pull request.</a></div>
            </div>
        </div>
    </div>    
</div>













